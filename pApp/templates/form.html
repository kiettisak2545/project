{%extends "navbar.html"%}
{%block content%}
<form method="POST">
    {%csrf_token%}
    <div class="text-nowrap bd-highlight" style="width: 8rem;">
        สร้างงาน
    </div>
    <div class="row" style="width: 30rem;">
        <div class="col">
            <label for="name">ชื่อ</label>
            <input type="text" name="name" class="form-control" >

            <label for="lastName">ที่อยู่</label>
            <input type="text" name = "address" class="form-control" >
        </div>

        <div class="col">
            <label for="lastName">นามสกุล</label>
            <input type="text" name = "lastName" class="form-control">

            <label for="lastName">เบอร์โทร</label>
            <input type="text" name = "tel" class="form-control">
        </div>
    </div>
    
    <br>

    <div class="text-nowrap bd-highlight" style="width: 30rem;">
        ใบเสนอราคา
        <div id="form-container">
            <!-- แถวเริ่มต้น -->
            <div class="row">
                <div class="col">
                    <label for="item1">รายการ</label>
                    <input type="text" name="orderName1" class="form-control" value="">
                </div>
        
                <div class="col">
                    <label for="quantity1">จำนวน</label>
                    <input type="text" name="amount1" class="form-control" value="">
                </div>
        
                <div class="col">
                    <label for="price1">ราคาต่อหน่วย</label>
                    <input type="text" name="price1" class="form-control" value="">
                </div>
        
                <div class="col">
                    <button type="button" class="btn btn-danger remove-row" style="margin-top: 24px;">ลบ</button>
                </div>
            </div>
        </div>
        
        <div>
            <!-- ปุ่มเพิ่มแถว -->
            <button id="add-row" type="button" class="btn btn-warning" style="margin-top: 20px;">เพิ่ม</button>
            <input type="submit" value="บันทึก" class="btn btn-warning" style="margin-top: 20px;">
        </div>
        
        
        
        <script>
            // ตัวแปรสำหรับนับจำนวนแถว
            let rowCount = 1;
        
            // ฟังก์ชันสำหรับเพิ่มแถวใหม่
            document.getElementById("add-row").addEventListener("click", function () {
                rowCount++; // เพิ่มตัวนับแถว
        
                // เลือก container ที่จะเพิ่มแถวใหม่
                const formContainer = document.getElementById("form-container");
        
                // สร้างแถวใหม่
                const newRow = document.createElement("div");
                newRow.classList.add("row");
                newRow.innerHTML = `
                    <div class="col">
                        <label for="item${rowCount}">รายการ</label>
                        <input type="text" name="orderName${rowCount}" class="form-control" value="">
                    </div>
        
                    <div class="col">
                        <label for="quantity${rowCount}">จำนวน</label>
                        <input type="text" name="amount${rowCount}" class="form-control" value="">
                    </div>
        
                    <div class="col">
                        <label for="price${rowCount}">ราคาต่อหน่วย</label>
                        <input type="text" name="price${rowCount}" class="form-control" value="">
                    </div>
        
                    <div class="col">
                        <button type="button" class="btn btn-danger remove-row" style="margin-top: 24px;">ลบ</button>
                    </div>
                `;
        
                // เพิ่มแถวใหม่เข้าไปใน container
                formContainer.appendChild(newRow);
            });
        
            // ฟังก์ชันสำหรับลบแถว
            document.getElementById("form-container").addEventListener("click", function (e) {
                if (e.target && e.target.classList.contains("remove-row")) {
                    // ลบแถวที่ปุ่ม "ลบ" อยู่ในนั้น
                    e.target.closest(".row").remove();
                }
            });
        </script>
   
</form>
{%endblock%}